---
import { Icon } from "astro-icon/components";
import Hamburger from "./Hamburger.astro";
import LinkButton from "./LinkButton.astro";
---

<header class="fade-in" style="--delay: 1s">
  <nav>
    <a href="/" aria-label="Home">
      <svg class="logo" width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="48" height="48" id="logo-bg"></rect>
        <path
          d="M21.5001 16.7587C21.5001 16.7587 21.5001 16.5 23.0001 16.5C26.4546 16.5 29.5 18.5001 29.5001 22.5C29.5002 26.4999 29.5001 32.5 29.5001 33.5C29.5001 34.5 31.5001 34.5 31.5001 34.5V36.5C31.5001 36.5 27.5001 36.5 27.5001 33.5C27.5001 33.5 27.5002 25.5 27.5001 22.5C27.5 19.5 25.3514 18.5001 23.0001 18.5001C19.5 18.5 19.5001 20.5001 19.5001 20.5001L19.5 16.5L19.5001 12.5C19.5001 10.5 16.5001 10.5 16.5001 10.5V8.5C16.5001 8.5 21.5 8.5 21.5001 12.5C21.5002 16.5 21.5001 16.7587 21.5001 16.7587Z"
          fill="white"></path>
        <path d="M18.5 29.5L16.4998 29.5L16.5 11.5C16.5 11.5 18.5 11.5 18.5 12.5V29.5Z" fill="white"></path>
        <path
          d="M19.5 22.5C19.5 20.5 21.4257 19.5 23 19.5C24.5743 19.5 26.5 20.807 26.5 22.5C26.5 24.193 26.5 33.5 26.5 33.5C26.5 37.5 31.5 37.5 31.5 37.5V39.5C31.5 39.5 24.5 39.5 24.5 33.5C24.5 27.5 24.5 22.5 24.5 22.5C24.5 21.5 23 21.5 23 21.5C23 21.5 21.5 21.5 21.5 22.5V29.5H19.5C19.5 29.5 19.5 24.5001 19.5 22.5Z"
          fill="white"></path>
      </svg>
    </a>
    <div class="nav-menu">
      <ul>
        <li><a href="/">HOME</a></li>
        <li>
          <a href="https://github.com/hubertlemczak" aria-label="GitHub">
            <Icon name="github" width={24} height={24} />
          </a>
        </li>
        <li>
          <LinkButton href="mailto:hubertlemczak@gmail.com" label="EMAIL" size="small" />
        </li>
      </ul>
    </div>
    <Hamburger />
  </nav>
</header>

<style>
  header {
    backdrop-filter: blur(8px);
    padding: 1.5rem;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 10;
  }

  nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .nav-menu {
    display: grid;
    place-items: center;
    width: 100vw;
    padding: 1.5rem;
    position: fixed;
    inset: 0;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.8);
    opacity: 0;
    pointer-events: none;
    z-index: 1;
  }

  body.mobile-nav-toggled .nav-menu {
    transition: opacity 0.3s ease-in-out;
  }

  .nav-menu ul {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    transform: translateX(-100%);
    margin-top: clamp(-200px, -30vh, -20px);
  }

  body.mobile-nav-toggled .nav-menu ul {
    transition: transform 0.3s ease-in-out;
  }

  .nav-menu li {
    width: fit-content;
  }

  body.mobile-nav-open .nav-menu {
    opacity: 1;
    pointer-events: all;
  }

  body.mobile-nav-open .nav-menu ul {
    transform: translateX(0);
  }

  a {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: white;
    text-decoration: none;
    letter-spacing: 0.05rem;
  }

  #logo-bg {
    fill: var(--color-accent);
    transition: fill 0.3s ease-in-out;
  }

  .logo:hover #logo-bg {
    fill: var(--color-accent-hover);
  }

  @media (width > 48em) {
    header {
      padding: 1.5rem 2rem;
    }

    .nav-menu {
      width: fit-content;
      padding: 0;
      position: initial;
      height: fit-content;
      background-color: transparent;
      opacity: 1;
      pointer-events: all;
    }

    .nav-menu ul {
      flex-direction: row;
      margin: 0;
      align-items: center;
      transform: translateX(0);
    }
  }
</style>
